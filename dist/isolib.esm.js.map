{"version":3,"file":"isolib.esm.js","sources":["../src/components/atoms/Icon/index.tsx","../src/components/molecules/Breadcrumb/index.tsx","../src/components/molecules/SelectAsync/index.tsx","../src/components/molecules/Table/components/ImportantIcon.tsx","../src/components/molecules/Table/utils/getRowClassName.tsx","../src/components/molecules/Table/index.tsx","../src/components/molecules/TextCollapse/components/Container.tsx","../src/components/molecules/TextCollapse/components/ButtonCollapse.tsx","../src/components/molecules/TextCollapse/components/Internal.tsx","../src/components/molecules/TextCollapse/index.tsx","../src/components/molecules/Button/index.tsx","../src/components/atoms/FlowNode/index.tsx","../src/components/atoms/FlowEdge/index.tsx","../src/hooks/useTrasnlate.ts","../src/components/molecules/Flow/components/NodeTypeModal.tsx","../src/components/molecules/Flow/helpers/exportNode.ts","../src/components/molecules/Flow/helpers/nodesRelocation.ts","../src/components/molecules/Flow/helpers/index.ts","../src/components/molecules/Flow/hooks/useFlow.ts","../src/components/molecules/Flow/index.tsx"],"sourcesContent":["import React from 'react';\nimport * as Icons from '@ant-design/icons';\nexport interface IconProps {\n  src: string;\n  alt?: string;\n  width?: string | number;\n  height?: string | number;\n  style?: {};\n}\n\nfunction Icon({ src, alt, ...args }: IconProps) {\n  const key = src as keyof typeof Icons;\n  const Icon: Function = Icons[key];\n  if (Icon) {\n    return <Icon {...args} />;\n  }\n\n  return <img style={{ padding: '5px', ...args }} src={src} alt={alt} />;\n}\n\nexport default Icon;\n","import React from 'react';\nimport DefaultBreadcrumb from 'antd/lib/breadcrumb';\nimport type { BreadcrumbProps } from './typings';\n\nconst Breadcrumb = ({ breadcrumbNameMap, onClick }: BreadcrumbProps) => {\n  const handleClick =\n    (url?: string) =>\n    (event: React.MouseEvent): boolean => {\n      event.preventDefault();\n      if (url) onClick(url);\n      return false;\n    };\n\n  return (\n    <DefaultBreadcrumb style={{ margin: '16px 0' }}>\n      {breadcrumbNameMap.map(({ label, href }) => (\n        <DefaultBreadcrumb.Item key={href} href=\"#\" onClick={handleClick(href)}>\n          {label}\n        </DefaultBreadcrumb.Item>\n      ))}\n    </DefaultBreadcrumb>\n  );\n};\n\nexport default Breadcrumb;\n","import React, { useState, useRef, useMemo } from 'react';\nimport Select from 'antd/lib/select';\nimport debounce from 'lodash/debounce';\n\nimport {\n  SelectAsyncProps,\n  OptionType,\n  SelectFetchOptionsType,\n} from './typings';\n\nfunction SelectAsync({\n  fetchOptions,\n  defaultOptions,\n  defaultValue,\n  onChange,\n  ...props\n}: SelectAsyncProps) {\n  const [value, setValue] = useState(() => defaultValue);\n  const [options, setOptions] = useState(() => defaultOptions);\n  const [loading, setLoading] = useState(false);\n  const fetchRef = useRef(0);\n\n  const debounceFetcher = useMemo(() => {\n    const loadOptions = (val: SelectFetchOptionsType) => {\n      fetchRef.current += 1;\n      const fetchId = fetchRef.current;\n      setLoading(true);\n      fetchOptions(val).then((newOptions: OptionType[]) => {\n        if (fetchId !== fetchRef.current) {\n          return;\n        }\n\n        setLoading(false);\n        setOptions(newOptions);\n      });\n    };\n\n    return debounce(loadOptions, 800);\n  }, [fetchOptions]);\n\n  const handleOnChange = (val: string, option: OptionType | OptionType[]) => {\n    setValue(val);\n    if (onChange) onChange(val, option);\n  };\n\n  return (\n    <Select\n      labelInValue\n      filterOption={false}\n      onSearch={debounceFetcher}\n      onFocus={debounceFetcher}\n      {...props}\n      loading={loading}\n      value={value}\n      onChange={handleOnChange}\n      options={options}\n    />\n  );\n}\n\nexport default SelectAsync;\n","import React from 'react';\nimport { BellOutlined, BellFilled } from '@ant-design/icons';\nimport { ImportantIconProps } from '../typings';\n\nfunction ImportantIcon({ important }: ImportantIconProps) {\n  const namespace = 'isolib-table-msg isolib-table-msg-icon';\n\n  if (important) {\n    return <BellFilled className={`${namespace}--selected`} />;\n  }\n  return <BellOutlined className={`${namespace}--no-selected`} />;\n}\n\nexport default ImportantIcon;\n","import { TableRecord } from '../typings';\n\ninterface BaseRecord {\n  _id?: string;\n  read?: boolean;\n}\n\nexport default (hoverID: React.Key) =>\n  (record: TableRecord<BaseRecord>): string => {\n    const namespace = 'isolib-table-msg';\n    const classnames = [namespace];\n    if (record.read === false) {\n      classnames.push(`${namespace}--unread`);\n    }\n\n    if (hoverID === record._id) {\n      classnames.push(`${namespace}--hover`);\n    }\n\n    return classnames.join(' ');\n  };\n","import React, { useState } from 'react';\nimport DefaultTable from 'antd/lib/table';\nimport ImportantIcon from './components/ImportantIcon';\nimport getRowClassName from './utils/getRowClassName';\nimport { TableProps, TableRecord } from '../../..';\n\nfunction Table({\n  columns,\n  dataSource,\n  hidePagination = false,\n  loading = true,\n  onChange,\n  onRowClick,\n  pagination,\n  isMessage = false,\n  ...rest\n}: TableProps) {\n  const [hover, setHover] = useState<React.Key>('');\n\n  const additionalColumns = [];\n  if (isMessage) {\n    additionalColumns.push({\n      dataIndex: 'important',\n      key: 'important',\n      width: 40,\n      render: (_i: string | number | boolean, res: TableRecord) => (\n        <ImportantIcon {...res} />\n      ),\n    });\n  }\n\n  const handleRowClick = (record: TableRecord) => () => {\n    if (onRowClick) onRowClick(record);\n  };\n\n  return (\n    <div className={`isolib-table ${isMessage ? 'isolib-table-msg' : ''}`}>\n      <DefaultTable\n        size=\"middle\"\n        scroll={{ y: '100%' }}\n        {...rest}\n        rowSelection={{ type: 'checkbox' }}\n        columns={[...additionalColumns, ...columns]}\n        dataSource={dataSource}\n        pagination={\n          !hidePagination && {\n            ...pagination,\n            showSizeChanger: true,\n            position: ['bottomCenter'],\n          }\n        }\n        onChange={onChange}\n        loading={loading}\n        rowKey={(record) => record._id}\n        rowClassName={isMessage ? getRowClassName(hover) : ''}\n        onRow={(record) => ({\n          onClick: handleRowClick(record),\n          onMouseEnter: () => setHover(record._id),\n          onMouseLeave: () => setHover(''),\n        })}\n      />\n    </div>\n  );\n}\n\nexport default Table;\n","import React from 'react';\nimport type { ContainerProps } from '../typings';\n\nexport const Container = ({ children, style = {} }: ContainerProps) => {\n  return (\n    <div\n      className=\"isolib-text-collapse isolib-text-collapse-container\"\n      style={style}\n    >\n      {children}\n    </div>\n  );\n};\n","import React from 'react';\nimport DefaultButton from 'antd/lib/button';\nimport type { ButtonCollapseProps } from '../typings';\n\nexport const ButtonCollapse = ({\n  children,\n  collapsed,\n  hidden,\n  innerRef,\n  space,\n  onClick,\n}: ButtonCollapseProps) => {\n  return (\n    <DefaultButton\n      type=\"link\"\n      className=\"isolib-text-collapse-button\"\n      ref={innerRef}\n      hidden={hidden}\n      onClick={onClick}\n      style={collapsed ? { position: 'absolute', right: `-${space}px` } : {}}\n    >\n      {children}\n    </DefaultButton>\n  );\n};\n","import React from 'react';\nimport classNames from 'classnames';\nimport type { InternalProps } from '../typings';\n\nexport const Internal = ({\n  innerRef,\n  collapsed,\n  space,\n  children,\n}: InternalProps) => {\n  return (\n    <div\n      ref={innerRef}\n      style={collapsed && space ? { paddingRight: space } : {}}\n      className={classNames('isolib-text-collapse-internal', {\n        'isolib-text-collapse-internal--collapsed': collapsed,\n      })}\n    >\n      {children}\n    </div>\n  );\n};\n","import React, { useState, useRef, useEffect } from 'react';\nimport { Container, ButtonCollapse, Internal } from './components';\nimport type { TextCollapseProps } from './typings';\n\nfunction TextCollapse({\n  children,\n  textSpace,\n  textLess,\n  textMore,\n  style = {},\n}: TextCollapseProps) {\n  const [collapsed, setCollapsed] = useState(true);\n  const [buttonHidden, setButtonHidden] = useState(true);\n  const buttonRef = useRef<HTMLButtonElement>(null);\n  const internalRef = useRef<HTMLDivElement>(null);\n  const textRef = useRef<HTMLSpanElement>(null);\n\n  const handleClick = () => {\n    setCollapsed(!collapsed);\n  };\n\n  useEffect(() => {\n    if (internalRef.current && textRef.current) {\n      const textWidth = textRef.current.offsetWidth;\n      const innerWidth = internalRef.current.offsetWidth;\n      const bHidden = !!(textWidth + textSpace < innerWidth);\n      setButtonHidden(bHidden);\n    }\n  }, [textSpace]);\n\n  return (\n    <Container style={style}>\n      <Internal collapsed={collapsed} innerRef={internalRef} space={textSpace}>\n        <span ref={textRef}>{children}</span>\n        <ButtonCollapse\n          innerRef={buttonRef}\n          collapsed={collapsed}\n          onClick={handleClick}\n          hidden={buttonHidden}\n          space={textSpace}\n        >\n          {collapsed ? textMore : textLess}\n        </ButtonCollapse>\n      </Internal>\n    </Container>\n  );\n}\n\nexport default TextCollapse;\n","import React from 'react';\nimport Icon from '../../atoms/Icon';\nimport DefaultButton from 'antd/lib/button';\nimport type { ButtonProps } from './typings';\n\nfunction Button(props: ButtonProps) {\n  const { icon, size, className, ...rest } = props;\n\n  if (size === 'bigger') {\n    return (\n      <Button className={`isolib__bigger-button ${className}`} {...rest}>\n        <div className=\"isolib__bigger-button-label\">{props.children}</div>\n        {!!icon && (\n          <div className=\"isolib__bigger-button-icon\">\n            <Icon src={icon} />\n          </div>\n        )}\n      </Button>\n    );\n  }\n\n  return <DefaultButton {...props} className={className} size={size} />;\n}\n\nexport default Button;\n","import React, { memo } from 'react';\nimport { Position, Handle } from 'reactflow';\nimport Icon from '../Icon';\n\ninterface FlowNodeProps {\n  data: {\n    icon: string;\n    label: string;\n    static: boolean;\n    color?: string;\n    onRemove: () => void;\n  };\n}\n\nexport const FlowNode = memo(({ data }: FlowNodeProps) => {\n  const { icon, label, onRemove, color = '#6938fb' } = data;\n  return (\n    <>\n      <Handle type=\"target\" position={Position.Top} isConnectable={false} />\n      <div className=\"react-flow__custom-node\">\n        <div\n          className=\"react-flow__custom-node-container\"\n          style={{ borderColor: color }}\n        >\n          <div\n            className=\"react-flow__custom-node-header\"\n            style={{ background: color }}\n          >\n            <span className=\"react-flow__custom-node-header-icon\">\n              <Icon src={icon} />\n            </span>\n            {!data?.static && (\n              <span\n                className=\"react-flow__custom-node-header-close\"\n                onClick={onRemove}\n              >\n                <Icon src=\"CloseCircleFilled\" />\n              </span>\n            )}\n          </div>\n          <div className=\"react-flow__custom-node-label\">{label}</div>\n        </div>\n      </div>\n      <Handle\n        type=\"source\"\n        position={Position.Bottom}\n        id=\"b\"\n        style={{ bottom: 10, top: 'auto' }}\n        isConnectable={false}\n      />\n    </>\n  );\n});\n","import React from 'react';\nimport { getBezierPath } from 'reactflow';\nimport type { BezierEdgeProps } from 'reactflow';\n\ninterface FlowEdgeProps extends Omit<BezierEdgeProps, 'id'> {\n  id?: string;\n}\n\nexport const FlowEdge = ({\n  id,\n  sourceX,\n  sourceY,\n  targetX,\n  targetY,\n  sourcePosition,\n  targetPosition,\n  style = {},\n  data,\n  markerEnd,\n}: FlowEdgeProps): JSX.Element => {\n  const mainColor = '#b1b1b7';\n  const [edgePath] = getBezierPath({\n    sourceX,\n    sourceY,\n    sourcePosition,\n    targetX,\n    targetY,\n    targetPosition,\n    curvature: 0,\n  });\n\n  const X = (sourceX + targetX) / 2;\n  const Y = (sourceY + targetY) / 2;\n  const node = data.target;\n  const edge = id;\n\n  return (\n    <>\n      <path\n        id={id}\n        style={style}\n        className=\"react-flow__edge-path\"\n        d={edgePath}\n        markerEnd={markerEnd}\n      />\n      {!data?.static && (\n        <g\n          transform={`translate(${X}, ${Y})`}\n          onClick={() => data?.onClick(node, edge)}\n        >\n          <rect\n            x=\"-10\"\n            y=\"-10\"\n            width=\"18\"\n            ry=\"4\"\n            rx=\"4\"\n            height=\"18\"\n            fill=\"white\"\n            stroke={mainColor}\n          ></rect>\n          <text fill={mainColor} y=\"3\" x=\"-5\">\n            +\n          </text>\n        </g>\n      )}\n    </>\n  );\n};\n\n/**\n * \n  \n */\n","type I18nProps = { [key: string]: string };\n\nexport const useTranslate =\n  (i18n?: I18nProps) =>\n  (text: string): string => {\n    return i18n ? i18n[text] : text;\n  };\n","import React, { useState } from 'react';\nimport Modal from 'antd/lib/modal';\n\nimport Button from '../../../molecules/Button';\nimport { useTranslate } from '../../../../hooks/useTrasnlate';\n\nimport type { NoteTypeModalProps, payloadType } from '../typings';\n\nconst NodeTypeModal = ({\n  id,\n  icon,\n  label,\n  i18n,\n  modal,\n  onSubmit,\n}: NoteTypeModalProps) => {\n  const tt = useTranslate(i18n);\n\n  const [isOpen, setIsOpen] = useState(false);\n\n  const handleCloseModal = () => setIsOpen(false);\n\n  const handleClick = () => {\n    if (modal) {\n      setIsOpen(true);\n    } else {\n      onSubmit({});\n    }\n  };\n\n  const handleSubmit = (payload: payloadType) => {\n    onSubmit(payload);\n    handleCloseModal();\n  };\n\n  return (\n    <>\n      <Button\n        key={id}\n        icon={icon}\n        onClick={handleClick}\n        size=\"bigger\"\n        className=\"flow-modal-add-item\"\n      >\n        {label}\n      </Button>\n      {!!modal && (\n        <Modal\n          title={tt('Add node')}\n          open={isOpen}\n          onCancel={handleCloseModal}\n          footer={[<Button onClick={handleCloseModal}>{tt('Close')}</Button>]}\n        >\n          {modal({ onSubmit: handleSubmit })}\n        </Modal>\n      )}\n    </>\n  );\n};\n\nexport default NodeTypeModal;\n","import type { Node } from 'reactflow';\nimport type { FlowDefaultNode } from '../typings';\n\nexport const exportNode = (nodes: Node[]): FlowDefaultNode[] => {\n  return nodes\n    .filter((node) => node.type === 'FlowNode')\n    .map(({ data }) => {\n      const variables: FlowDefaultNode = {\n        label: data.label,\n        icon: data.icon,\n      };\n\n      if (data.color) variables.color = data.color;\n\n      if (data.static) variables.static = data.static;\n\n      if (data.payload) variables.payload = data.payload;\n\n      return variables;\n    });\n};\n","import type { FlowNode } from '../typings';\nimport {\n  dxBetweenStartAndNode,\n  dxBetweenNodes,\n  dxLessWhenStaticNode,\n} from './index';\n\nexport const nodesRelocation = (nodes: FlowNode[]) => {\n  return nodes.reduce((initial, node, key) => {\n    const isStart = key === 0;\n    const isSecond = key === 1;\n    const beforeItem = initial[key - 1];\n    if (isStart) {\n      node.position.y = 0;\n    } else if (isSecond) {\n      node.position.y = dxBetweenStartAndNode;\n    } else {\n      const positionY = beforeItem?.position.y;\n      node.position.y = positionY + dxBetweenNodes;\n    }\n\n    if (beforeItem?.id !== 'start' && node.data.static) {\n      node.position.y -= dxLessWhenStaticNode;\n    }\n\n    return [...initial, node];\n  }, [] as FlowNode[]);\n};\n","export * from './exportNode';\nexport * from './nodesRelocation';\n\nexport const mainColor = '#6938fb';\nexport const dxBetweenNodes = 100;\nexport const dxBetweenStartAndNode = 80;\nexport const dxLessWhenStaticNode = 20;\n","import React, { useEffect, useRef } from 'react';\nimport { useNodesState, useEdgesState } from 'reactflow';\nimport { exportNode, nodesRelocation } from '../helpers';\n\nimport { mainColor, dxBetweenStartAndNode } from '../helpers';\n\nimport type {\n  FlowNode,\n  FlowDefaultNode,\n  FlowEdge,\n  payloadType,\n} from '../typings';\n\nconst circleStyles: React.CSSProperties = {\n  width: 24,\n  height: 24,\n  borderRadius: '50%',\n  textTransform: 'uppercase',\n  textAlign: 'center',\n  padding: 0,\n  justifyContent: 'center',\n  alignItems: 'center',\n  display: 'flex',\n  fontSize: '.3rem',\n};\n\nconst initialNodes: FlowNode[] = [\n  {\n    id: 'start',\n    type: 'input',\n    data: { label: 'Start' },\n    style: {\n      ...circleStyles,\n      background: mainColor,\n      borderColor: mainColor,\n      color: '#fff',\n    },\n    position: { x: 63, y: 0 },\n    draggable: true,\n  },\n  {\n    id: 'end',\n    type: 'output',\n    style: {\n      ...circleStyles,\n      background: mainColor,\n      borderColor: mainColor,\n      color: '#fff',\n    },\n    data: { label: 'End' },\n    position: { x: 63, y: dxBetweenStartAndNode },\n    draggable: true,\n  },\n];\n\nconst initialEdges: FlowEdge[] = [\n  {\n    id: 'start-end',\n    type: 'FlowEdge',\n    source: 'start',\n    target: 'end',\n  },\n];\n\ninterface BuildFlowData {\n  source: string;\n  target: string;\n  static?: boolean;\n}\n\ninterface FlowHookProps {\n  openModal: (isOpen: boolean) => void;\n  onAdd?: (nodes: FlowDefaultNode[]) => void;\n  onRemove?: (nodes: FlowDefaultNode[]) => void;\n  defaultNodes?: FlowDefaultNode[];\n  draggable?: boolean;\n}\n\nconst useFlow = ({\n  defaultNodes = [],\n  onRemove,\n  onAdd,\n  openModal,\n  draggable,\n}: FlowHookProps) => {\n  const EdgeDataRef = useRef({ idNode: '', idEdge: '' });\n  const [nodes, setNodes, onNodesChange] = useNodesState(initialNodes);\n  const [edges, setEdges, onEdgesChange] = useEdgesState(initialEdges);\n\n  const onClickEdge = (idNode: string, idEdge: string) => {\n    EdgeDataRef.current = { idNode, idEdge };\n    openModal(true);\n  };\n\n  const buildFlowEdge = (data: BuildFlowData): FlowEdge => {\n    const curDate = String(Math.random() * 100000);\n    const { source, target } = data;\n    return {\n      id: curDate,\n      type: 'FlowEdge',\n      source,\n      target,\n      data: {\n        target,\n        static: data.static,\n        onClick: onClickEdge,\n      },\n    };\n  };\n\n  const handleRemove = (id: string) => {\n    let nodeList: FlowNode[] = [];\n\n    setNodes((nodes) => {\n      setEdges((edges) => {\n        const index = nodes.findIndex((node) => node.id === id);\n\n        const afterElement = nodes[index + 1];\n        const source = nodes[index - 1].id;\n        const target = afterElement.id;\n\n        const added = buildFlowEdge({\n          static: afterElement.data.static,\n          source,\n          target,\n        });\n\n        const filtered = edges.filter(\n          (edge) => edge.source !== id && edge.target !== id\n        );\n        return [...filtered, added];\n      });\n\n      nodeList = nodes.filter((node) => node.id !== id);\n      return nodesRelocation(nodeList);\n    });\n\n    if (onRemove) {\n      onRemove(exportNode(nodeList));\n    }\n  };\n\n  const buildFlowNode = (\n    data: FlowDefaultNode,\n    payload: payloadType\n  ): FlowNode => {\n    const curDate = String(Math.random() * 100000);\n    return {\n      id: curDate,\n      type: 'FlowNode',\n      position: { x: 0, y: 0 },\n      draggable,\n      data: {\n        ...data,\n        payload,\n        onRemove: () => handleRemove(curDate),\n      },\n    };\n  };\n\n  const handleAdd =\n    (defaultNode: FlowDefaultNode) => (payload: payloadType) => {\n      let nodesCopy: FlowNode[] = [];\n\n      const { idNode, idEdge } = EdgeDataRef.current;\n      const node = buildFlowNode(defaultNode, payload);\n\n      setNodes((nodes) => {\n        setEdges((edges) => {\n          const deleted = edges.find((edge) => edge.id === idEdge);\n          if (!deleted) return edges;\n\n          const edgeCopy = edges.filter((edge) => edge.id !== idEdge);\n\n          const addedEdges = [\n            buildFlowEdge({\n              source: deleted.source,\n              target: node.id,\n            }),\n            buildFlowEdge({\n              source: node.id,\n              target: deleted.target,\n            }),\n          ];\n\n          return edgeCopy.concat(addedEdges);\n        });\n\n        nodesCopy = [...nodes];\n        const index = nodesCopy.findIndex((node) => node.id === idNode);\n        nodesCopy.splice(index, 0, node);\n        return nodesRelocation(nodesCopy);\n      });\n\n      if (onAdd) {\n        onAdd(exportNode(nodesCopy));\n      }\n\n      openModal(false);\n    };\n\n  useEffect(() => {\n    const res = defaultNodes.reduce(\n      (initial, data: FlowDefaultNode, key: number) => {\n        const beforeItem = initial.nodes[key - 1];\n\n        const node = buildFlowNode(data, data.payload || {});\n        const edge = buildFlowEdge({\n          static: data.static,\n          source: beforeItem ? beforeItem.id : 'start',\n          target: node.id,\n        });\n\n        return {\n          ...initial,\n          nodes: [...initial.nodes, node],\n          edges: [...initial.edges, edge],\n        };\n      },\n      { nodes: [] as FlowNode[], edges: [] as FlowEdge[] }\n    );\n\n    const [start, end] = initialNodes.map((item) => ({ ...item, draggable }));\n    const nodes = nodesRelocation([start, ...res.nodes, end]);\n    const sourceIndex = nodes.length - 2;\n\n    const endEdge = buildFlowEdge({\n      source: nodes[sourceIndex].id,\n      target: 'end',\n    });\n\n    setNodes(nodes);\n    setEdges([...res.edges, endEdge]);\n  }, []);\n\n  return {\n    nodes,\n    edges,\n    onNodesChange,\n    onEdgesChange,\n    handleAdd,\n  };\n};\n\nexport default useFlow;\n","import React, { useRef, useState, useEffect } from 'react';\nimport ReactFlow, { Controls } from 'reactflow';\nimport Modal from 'antd/lib/modal';\n\nimport Button from '../../molecules/Button';\nimport * as FlowNode from '../../atoms/FlowNode';\nimport * as FlowEdge from '../../atoms/FlowEdge';\nimport { useTranslate } from '../../../hooks/useTrasnlate';\nimport NodeTypeModal from './components/NodeTypeModal';\nimport useFlow from './hooks/useFlow';\n\nimport type { FlowProps, FlowContainerRef } from './typings';\n\n// import './styles.less';\n\nconst Flow = (props: FlowProps) => {\n  const containerRef: FlowContainerRef = useRef(null);\n  const tt = useTranslate(props.i18n);\n  const [horizontal, setHorizontal] = useState(0);\n  const [isOpen, openModal] = useState(false);\n\n  const { defaultNodes, onRemove, draggable, onAdd } = props;\n  const flowParams = { defaultNodes, onRemove, onAdd, openModal, draggable };\n\n  const flow = useFlow(flowParams);\n\n  const handleCloseModal = () => openModal(false);\n\n  useEffect(() => {\n    const width = containerRef.current?.offsetWidth;\n    if (width) {\n      const x = width / 2 - 150;\n      setHorizontal(x);\n    }\n  }, []);\n\n  return (\n    <div\n      ref={containerRef}\n      className=\"react-flow-global-container\"\n      style={{ width: '100%', height: '100vh' }}\n    >\n      {horizontal && (\n        <>\n          <ReactFlow\n            {...flow}\n            edgeTypes={FlowEdge}\n            nodeTypes={FlowNode}\n            snapToGrid={true}\n            defaultViewport={{\n              x: horizontal,\n              y: 0,\n              zoom: 2,\n            }}\n            minZoom={1}\n            maxZoom={2}\n            attributionPosition=\"bottom-left\"\n          >\n            <Controls showInteractive={false} />\n          </ReactFlow>\n          {props.nodeTypes && (\n            <Modal\n              title={tt('Add node')}\n              open={isOpen}\n              onCancel={handleCloseModal}\n              footer={[\n                <Button onClick={handleCloseModal}>{tt('Close')}</Button>,\n              ]}\n            >\n              <div className=\"flow-modal-add-container\">\n                {props.nodeTypes.map((node) => (\n                  <NodeTypeModal\n                    key={node.id}\n                    {...node}\n                    onSubmit={flow.handleAdd(node)}\n                    i18n={props.i18n}\n                  />\n                ))}\n              </div>\n            </Modal>\n          )}\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default Flow;\n"],"names":["Icon","_ref","src","alt","args","_objectWithoutPropertiesLoose","_excluded","key","Icons","React","style","_extends","padding","Breadcrumb","breadcrumbNameMap","onClick","handleClick","url","event","preventDefault","DefaultBreadcrumb","margin","map","_ref2","label","href","Item","SelectAsync","fetchOptions","defaultOptions","defaultValue","onChange","props","_useState","useState","value","setValue","_useState2","options","setOptions","_useState3","loading","setLoading","fetchRef","useRef","debounceFetcher","useMemo","loadOptions","val","current","fetchId","then","newOptions","debounce","handleOnChange","option","Select","labelInValue","filterOption","onSearch","onFocus","ImportantIcon","important","namespace","BellFilled","className","BellOutlined","hoverID","record","classnames","read","push","_id","join","Table","columns","dataSource","_ref$hidePagination","hidePagination","_ref$loading","onRowClick","pagination","_ref$isMessage","isMessage","rest","hover","setHover","additionalColumns","dataIndex","width","render","_i","res","handleRowClick","DefaultTable","size","scroll","y","rowSelection","type","concat","showSizeChanger","position","rowKey","rowClassName","getRowClassName","onRow","onMouseEnter","onMouseLeave","Container","children","_ref$style","ButtonCollapse","collapsed","hidden","innerRef","space","DefaultButton","ref","right","Internal","paddingRight","classNames","TextCollapse","textSpace","textLess","textMore","setCollapsed","buttonHidden","setButtonHidden","buttonRef","internalRef","textRef","useEffect","textWidth","offsetWidth","innerWidth","bHidden","Button","icon","FlowNode","memo","data","onRemove","_data$color","color","Handle","Position","Top","isConnectable","borderColor","background","Bottom","id","bottom","top","FlowEdge","sourceX","sourceY","targetX","targetY","sourcePosition","targetPosition","markerEnd","mainColor","_getBezierPath","getBezierPath","curvature","edgePath","X","Y","node","target","edge","d","transform","x","ry","rx","height","fill","stroke","useTranslate","i18n","text","NodeTypeModal","modal","onSubmit","tt","isOpen","setIsOpen","handleCloseModal","handleSubmit","payload","Modal","title","open","onCancel","footer","exportNode","nodes","filter","variables","nodesRelocation","reduce","initial","isStart","isSecond","beforeItem","dxBetweenStartAndNode","positionY","dxBetweenNodes","dxLessWhenStaticNode","circleStyles","borderRadius","textTransform","textAlign","justifyContent","alignItems","display","fontSize","initialNodes","draggable","initialEdges","source","useFlow","defaultNodes","_ref$defaultNodes","onAdd","openModal","EdgeDataRef","idNode","idEdge","_useNodesState","useNodesState","setNodes","onNodesChange","_useEdgesState","useEdgesState","edges","setEdges","onEdgesChange","onClickEdge","buildFlowEdge","curDate","String","Math","random","handleRemove","nodeList","index","findIndex","afterElement","added","filtered","buildFlowNode","handleAdd","defaultNode","nodesCopy","_EdgeDataRef$current","deleted","find","edgeCopy","addedEdges","splice","_initialNodes$map","item","start","end","sourceIndex","length","endEdge","Flow","containerRef","horizontal","setHorizontal","flowParams","flow","_containerRef$current","ReactFlow","edgeTypes","nodeTypes","snapToGrid","defaultViewport","zoom","minZoom","maxZoom","attributionPosition","Controls","showInteractive"],"mappings":"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"}